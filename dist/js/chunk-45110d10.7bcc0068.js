(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45110d10"],{"08fc":function(a,t,e){var i=e("24fb");t=i(!1),t.push([a.i,".detail-container[data-v-45ed733f]{background-color:#f2f2f2;padding:0;margin:0;overflow-y:scroll}.table-container[data-v-45ed733f]{overflow-y:scroll}",""]),a.exports=t},"0c67":function(a,t,e){"use strict";var i=e("dac7"),s=e.n(i);s.a},dac7:function(a,t,e){var i=e("08fc");"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var s=e("499e").default;s("db30d3e0",i,!0,{sourceMap:!1,shadowMode:!1})},e206:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"detail-container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!a.showDetail,expression:"!showDetail"}],staticClass:"detail-data-box"},[e("header",{staticClass:"search-header"},[e("div",{staticClass:"search-group"},[e("label",[a._v("日期筛选:")]),e("flat-picker",{staticClass:"search-time-picker",attrs:{config:a.dateConfig,placeholder:"起始时间"},model:{value:a.start_time,callback:function(t){a.start_time=t},expression:"start_time"}}),a._m(0),e("flat-picker",{staticClass:"search-time-picker",attrs:{config:a.dateConfig,placeholder:"结束时间"},model:{value:a.end_time,callback:function(t){a.end_time=t},expression:"end_time"}})],1),e("button",{staticClass:"search-btn",on:{click:function(t){return a.loadTBData(1)}}},[a._v("搜索")]),e("div",{staticClass:"search-group text-right"},[e("label",[a._v("*只能导入今日数据")]),e("button",{staticClass:"action-btn",on:{click:a.selectFile}},[a._v("导入")]),e("input",{ref:"file",attrs:{type:"file",hidden:"",accept:".xls, .xlsx"},on:{change:a.fileChange}}),e("a",{ref:"downloadFile",attrs:{hidden:"",download:"手工数据.xlsx"}}),e("a",{staticClass:"action-btn",staticStyle:{display:"inline-block"},attrs:{href:a.downloadUrl,download:a.nextDay+".xlsx"}},[a._v("模板下载")])])]),e("div",{staticClass:"table-container hideScrollBar"},[e("detail-table",{attrs:{tbData:a.tbData,tableHeader:a.tableHeader,tbType:a.tbType},on:{loadHandDetail:a.loadHandDetail}})],1),e("page",{attrs:{pageData:a.pageData},on:{loadList:a.loadTBData}})],1),a.showDetail?e("cps-hand-detail",{attrs:{startTime:a.detailStartTime}}):a._e()],1)},s=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"split-line"},[e("div")])}],l=e("2c17"),n=e("c38f"),o=e.n(n),r=(e("0952"),e("dc1c")),d=e("bcc8"),c=e("bff1"),p=e("ef59"),g=e("2b27"),h=e.n(g),u=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"detail-data-box"},[a._m(0),e("div",{staticClass:"table-container hideScrollBar"},[e("detail-table",{attrs:{tbData:a.tbData,tableHeader:a.tableHeader,tbType:a.tbType}})],1),e("page",{attrs:{pageData:a.pageData},on:{loadList:a.loadDetailData}})],1)},f=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("header",{staticClass:"search-header"},[e("div",{staticClass:"search-group"},[e("label",[a._v("手工数据详情")])])])}],m={inject:["alert","showLoading","hideLoading"],components:{"detail-table":d["a"],page:p["a"]},props:["startTime"],data:function(){return{tbData:[],tableHeader:c["default"].tableHeader.cpsHandDetail,tbType:"common",pageData:{total:0,page:1,total_page:0}}},created:function(){this.loadDetailData()},methods:{loadDetailData:function(a){var t=this;this.showLoading(),a=a||1,Object(l["a"])({url:c["default"].urls.cpsHandDetail,method:"get",params:{day:this.startTime,page:a}}).then((function(a){if(200==a.status){var e=a.data;200==e.code?t.createTBData(e.data):t.alert(e.message||"加载"+t.startTime+"日详情数据失败")}else t.alert("加载"+t.startTime+"日详情数据失败")})).catch((function(a){t.alert("加载"+t.startTime+"日详情数据失败")})).then((function(){t.hideLoading()}))},createTBData:function(a){this.pageData["total_page"]=a.pageCount||a.total_page||0,this.pageData.total=a.total,this.pageData.page=a.page;for(var t=["statistics_day","platform","cpsnick","cpsname","lm_predict_amount","lm_settlement_amount","db_predict_amount","db_settlement_amount","diff_predict_amount","diff_settlement_amount"],e=[],i=0;i<a.data.length;i++){var s=a.data[i];e.push([]);for(var l=0;l<t.length;l++)e[i].push(s[t[l]])}this.tbData=Object.assign([],e)}}},D=m,_=e("2877"),v=Object(_["a"])(D,u,f,!1,null,null,null),b=v.exports,w={inject:["reload","alert","showLoading","hideLoading"],data:function(){var a=new Date;a.setDate(a.getDate()-1);var t="";t+=a.getFullYear()+"-",t+=(a.getMonth()<9?"0":"")+(a.getMonth()+1)+"-",t+=(a.getDate()<10?"0":"")+a.getDate(),a.setDate(a.getDate()-15);var e="";e=a.getFullYear()+"-"+(a.getMonth()<9?"0":"")+(a.getMonth()+1)+"-"+(a.getDate()<10?"0":"")+a.getDate();var i=new Date;return i.setDate(i.getDate()+1),i=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),{start_time:e,end_time:t,dateConfig:{time_24hr:!0,maxDate:t,locale:r["Mandarin"]},tbData:[],tableHeader:c["default"].tableHeader.cpsHandData,tbType:"handdata",pageData:{total_page:0,page:1,total:0},showDetail:!1,nextDay:i,detailStartTime:null,downloadUrl:c["default"].baseUrl+"/getexcel?day="+i+"&skey="+h.a.get("skey")}},components:{"flat-picker":o.a,"detail-table":d["a"],page:p["a"],"cps-hand-detail":b},created:function(){this.loadTBData(1)},methods:{getFile:function(){var a=this.$refs.file;return 0==a.files.length?null:a.files[0]},fileChange:function(){var a=this.getFile();a&&this.uploadFile(a)},uploadFile:function(a){var t=this;this.showLoading();var e=new FormData;e.append("file",a),Object(l["a"])({url:c["default"].urls.cpsHandImport,method:"post",data:e}).then((function(a){200==a.status?200==a.data.code?(t.$refs.downloadFile.href=c["default"].baseUrl+"/"+a.data.data.url+"&skey="+h.a.get("skey"),t.$refs.downloadFile.click()):t.alert(a.data.message||"上传手工数据失败"):t.alert("上传手工数据失败")})).catch((function(a){t.alert("上传手工数据失败")})).then((function(){t.hideLoading()}))},selectFile:function(){this.$refs.file.click()},loadHandDetail:function(a){this.detailStartTime=a[0],this.showDetail=!0,this.$parent.subTitle2="手工数据详情"},createTBData:function(a){this.pageData["total_page"]=a.total_page||a.pageCount||0,this.pageData.total=a.total||0,this.pageData.page=a.page||1;for(var t=["statistics_day","platform","lm_predict_amount","lm_settlement_amount","db_predict_amount","db_settlement_amount","diff_predict_amount","diff_settlement_amount"],e=[],i=0;i<a.data.length;i++){var s=a.data[i];e.push([]);for(var l=0;l<t.length;l++)e[i].push(s[t[l]])}this.tbData=Object.assign([],e)},loadTBData:function(a){var t=this;this.showLoading(),Object(l["a"])({url:c["default"].urls.cpsHandList,method:"get",params:{start_time:this.start_time,end_time:this.end_time,page:a||1}}).then((function(a){if(200==a.status){var e=a.data;200==e.code?t.createTBData(e.data):t.alert(e.message||"加载手工数据失败")}else t.alert("加载手工数据失败")})).catch((function(a){t.alert("加载手工数据失败")})).then((function(){t.hideLoading()}))}}},k=w,C=(e("0c67"),Object(_["a"])(k,i,s,!1,null,"45ed733f",null));t["default"]=C.exports},ef59:function(a,t,e){"use strict";var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"pages-container"},[a._v(" 共搜索到"),e("span",{staticClass:"pages-rows"},[a._v(a._s(a.pageData.total))]),a._v("条数据 "),e("div",{staticClass:"pages-btns"},[e("div",{class:"pageBtn prev"+(1==a.pageData.page?" disabled":""),on:{click:a.loadPrevPage}},[a._v("<")]),a._l(a.toPage-a.fromPage+1,(function(t){return e("div",{key:t,class:"pageBtn"+(t+a.fromPage-1==a.pageData.page?" checked":""),on:{click:function(e){return a.loadList(t+a.fromPage-1)}}},[a._v(a._s(t+a.fromPage-1))])})),e("div",{class:"pageBtn next"+(a.pageData.page==a.pageData.total_page?" disabled":""),on:{click:a.loadNextPage}},[a._v(">")])],2)])},s=[],l={inject:["alert"],props:["pageData"],data:function(){return{}},methods:{loadPrevPage:function(){1!=this.pageData.page?this.loadList(this.pageData.page-1):this.alert("已经是第一页")},loadNextPage:function(){this.pageData.page>=this.pageData.total_page?this.alert("已经是最后一页"):this.loadList(this.pageData.page-0+1)},loadList:function(a){this.$emit("loadList",a)}},computed:{fromPage:function(){var a=1;return a=this.pageData.total_page>9?this.pageData.page<=5?1:this.pageData.total_page-this.pageData.page<=4?this.pageData.total_page-8:this.pageData.page-4:1,a},toPage:function(){var a=9;return a=this.pageData.total_page>9?this.pageData.page<=5?9:this.pageData.total_page-this.pageData.page<=4?this.pageData.total_page-0:this.pageData.page-0+4:this.pageData.total_page-0||1,a}}},n=l,o=e("2877"),r=Object(o["a"])(n,i,s,!1,null,null,null);t["a"]=r.exports}}]);