(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-119fa1dc"],{"505b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail-container"},[a("div",{staticClass:"detail-data-box"},[a("header",{staticClass:"search-header"},[a("div",{staticClass:"search-group"},[a("label",[e._v("商品名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.goodsTitle,expression:"goodsTitle"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.goodsTitle},on:{input:function(t){t.target.composing||(e.goodsTitle=t.target.value)}}})]),a("div",{staticClass:"search-group"},[a("label",[e._v("商品ID:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.goodsId,expression:"goodsId"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.goodsId},on:{input:function(t){t.target.composing||(e.goodsId=t.target.value)}}})]),a("selector",{staticClass:"search-group",attrs:{selectParams:e.selectParams,value:e.platform},on:{selectOptsClicked:e.selectOptsClicked}}),a("div",{staticClass:"search-group"},[a("label",[e._v("日期筛选:")]),a("flat-picker",{staticClass:"search-time-picker",attrs:{config:e.dateConfig,placeholder:"起始时间"},model:{value:e.createTimeBegin,callback:function(t){e.createTimeBegin=t},expression:"createTimeBegin"}}),e._m(0),a("flat-picker",{staticClass:"search-time-picker",attrs:{config:e.dateConfig,placeholder:"结束时间"},model:{value:e.createTimeEnd,callback:function(t){e.createTimeEnd=t},expression:"createTimeEnd"}})],1),a("button",{staticClass:"action-btn",on:{click:e.clearCheckedGoodsAndLoadData}},[e._v("搜索")]),a("a",{staticClass:"action-btn",staticStyle:{display:"inline-block"},attrs:{href:e.downloadUrl,download:e.createTimeBegin+".xlsx"}},[e._v("导出全部")]),a("a",{staticClass:"action-btn",staticStyle:{display:"inline-block"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.selectExcel(t)}}},[e._v("导入")]),a("form",{ref:"fileForm",staticStyle:{display:"none"},attrs:{enctype:"multipart/form-data"}},[a("input",{ref:"excelIpt",attrs:{type:"file",accept:".xls, .xlsx",name:"file"},on:{change:e.uploadExcel}})])],1),a("div",{staticClass:"table-container hideScrollBar"},[a("detail-table",{attrs:{tbData:e.tbData,checkedArray:e.checkedGoods,tbType:e.tbType,tableHeader:e.tableHeader},on:{changeCheckStatus:e.changeCheckStatus}})],1),a("div",{staticClass:"page-footer",staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-top":".3rem",height:".875rem","line-height":".875rem"}},[a("input",{staticStyle:{"margin-left":"1rem"},attrs:{type:"checkbox",id:"checkAllGoods"},domProps:{checked:e.allGoodsChecked},on:{click:function(t){return e.changeAllGoodsCheckStatu(t)}}}),a("label",{staticStyle:{"font-size":".375rem",color:"#666666",display:"inline-block",height:"100%","line-height":"1rem","margin-left":".3125rem","vertical-align":"top"},attrs:{for:"checkAllGoods"}},[e._v("全选")]),a("button",{staticClass:"action-btn",on:{click:e.exportCheckedGoods}},[e._v("导出")]),a("a",{ref:"exportXlsx",staticClass:"action-btn",staticStyle:{display:"none"}},[e._v("导出")])]),a("page",{staticStyle:{width:"0",flex:"1"},attrs:{pageData:e.pageData},on:{loadList:e.loadTBData}})],1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"split-line"},[a("div")])}],s=(a("c975"),a("a15b"),a("a434"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("2c17")),c=a("bff1"),l=a("707d"),n=a("bcc8"),r=a("ef59"),d=a("c38f"),h=a.n(d),p=(a("0952"),a("dc1c")),u={inject:["reload","alert","showLoading","hideLoading"],components:{"flat-picker":h.a,selector:l["a"],"detail-table":n["a"],page:r["a"]},data:function(){var e=new Date,t="";return t+=e.getFullYear()+"-",t+=(e.getMonth()<9?"0":"")+(e.getMonth()+1)+"-",t+=(e.getDate()<10?"0":"")+e.getDate(),{dateConfig:{time_24hr:!0,maxDate:t,locale:p["Mandarin"]},goodsTitle:"",platform:"",goodsId:"",tbType:"orderSalesList",tbData:[],pageData:{total:0,page:1,total_page:0},selectParams:{label:"下单平台",options:[{value:"",text:"请选择"},{value:"jd",text:"京东"},{value:"pdd",text:"拼多多"},{value:"tb",text:"淘宝"},{value:"elm",text:"饿了么"},{value:"mt",text:"美团"}]},createTimeBegin:t,createTimeEnd:t,tableHeader:c["default"].tableHeader.orderSalesList,checkedGoods:[]}},created:function(){this.loadTBData()},computed:{downloadUrl:function(){return c["default"].baseUrl+c["default"].urls.appSaleRank+"?goodsTitle="+this.goodsTitle+"&goodsId="+this.goodsId+"&platform="+this.platform+"&page="+this.pageData.page+"&createTimeBegin="+this.createTimeBegin+"&is_excel=1&skey="+this.$cookies.get("skey")+"&createTimeEnd="+this.createTimeEnd},allGoodsChecked:function(){for(var e=!0,t=0;t<this.tbData.length;t++)if("--"!=this.tbData[t][0]&&-1==this.checkedGoods.indexOf(this.tbData[t][0])){e=!1;break}return e}},methods:{selectExcel:function(){this.$refs.excelIpt.click()},uploadExcel:function(){var e=this;this.showLoading();var t=new FormData(this.$refs.fileForm);Object(s["a"])({url:c["default"].urls.appSaleRank,method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.status?200==t.data.code?e.loadTBData(1):e.alert(t.data.message||"上传文件失败"):e.alert("上传文件失败")})).catch((function(t){e.alert("上传文件失败")})).then((function(){e.hideLoading(),e.$refs.excelIpt.value=""}))},exportCheckedGoods:function(){var e=this;0!=this.checkedGoods.length?(this.showLoading(),Object(s["a"])({url:c["default"].urls.appSaleRank,method:"get",responseType:"blob",params:{goodsTitle:this.goodsTitle,goodsId:this.goodsId,platform:this.platform,page:1,createTimeBegin:this.createTimeBegin,createTimeEnd:this.createTimeEnd,is_excel:1,goods_arr:this.checkedGoods.join(",")}}).then((function(t){if(200==t.status){var a=window.URL.createObjectURL(new Blob([t.data])),o=e.$refs.exportXlsx;o.href=a,o.setAttribute("download","商品列表.xlsx"),o.click(),e.checkedGoods=Object.assign([])}else e.alert("导出商品列表失败")})).catch((function(t){e.alert("导出商品列表失败")})).then((function(){e.hideLoading()}))):this.alert("请先选择要导出的商品")},clearCheckedGoodsAndLoadData:function(){this.checkedGoods=Object.assign([]),this.loadTBData(1)},loadTBData:function(e){var t=this;this.showLoading(),Object(s["a"])({url:c["default"].urls.appSaleRank,method:"get",params:{page:e||1,goodsTitle:this.goodsTitle,goodsId:this.goodsId,platform:this.platform,createTimeBegin:this.createTimeBegin,createTimeEnd:this.createTimeEnd}}).then((function(e){200==e.status?200==e.data.code?t.createTBData(e.data.data):t.alert(e.data.message||"加载商品销量排行列表失败"):t.alert("加载商品销量排行列表失败")})).catch((function(e){t.alert("加载商品销量排行列表失败")})).then((function(){t.hideLoading()}))},createTBData:function(e){this.pageData.total=e.total,this.pageData.page=e.page,this.pageData["total_page"]=e.total_page||e.pageCount||0;for(var t={},a=[{value:"",text:"请选择"}],o=0;o<e.platArr.length;o++)t[e.platArr[o]["plat"]]=e.platArr[o]["plat_name"],a.push({value:e.platArr[o]["plat"],text:e.platArr[o]["plat_name"]});this.selectParams.options=Object.assign([],a);for(var i=["goods_id","goods_title","goods_price","sale_num","platform","plat_commission_amount","order_amount"],s=[],c=0;c<e.data.length;c++){s.push([]);for(var l=e.data[c],n=0;n<i.length;n++){var r=l[i[n]]||(0==l[i[n]]?l[i[n]]:"--");4==n&&(r=t[r]||"--"),s[c].push(r)}}this.tbData=Object.assign([],s)},selectOptsClicked:function(e){this.platform=e},changeAllGoodsCheckStatu:function(e){for(var t=e.target.checked,a=0;a<this.tbData.length;a++)"--"!=this.tbData[a][0]&&(t?-1==this.checkedGoods.indexOf(this.tbData[a][0])&&this.checkedGoods.push(this.tbData[a][0]):this.checkedGoods.indexOf(this.tbData[a][0])>=0&&this.checkedGoods.splice(this.checkedGoods.indexOf(this.tbData[a][0]),1))},changeCheckStatus:function(e){"--"!=this.tbData[e][0]&&(this.checkedGoods.indexOf(this.tbData[e][0])>=0?this.checkedGoods.splice(this.checkedGoods.indexOf(this.tbData[e][0]),1):this.checkedGoods.push(this.tbData[e][0]))}}},g=u,f=(a("6e29"),a("2877")),m=Object(f["a"])(g,o,i,!1,null,"aeba9ee4",null);t["default"]=m.exports},"6e29":function(e,t,a){"use strict";var o=a("fece"),i=a.n(o);i.a},e80c:function(e,t,a){var o=a("24fb"),i=a("1de5"),s=a("f0c8"),c=a("0993");t=o(!1);var l=i(s),n=i(c);t.push([e.i,".detail-container[data-v-aeba9ee4]{background-color:#f2f2f2;padding:0;margin:0;overflow-y:scroll}input[type=checkbox][data-v-aeba9ee4]{position:relative;width:.625rem;height:.625rem}input[type=checkbox][data-v-aeba9ee4]:after{background-color:#fff;background-image:url("+l+');position:absolute;content:" ";background-repeat:no-repeat;background-position:50%;background-size:100% 100%;width:.625rem;height:.625rem}input[type=checkbox][data-v-aeba9ee4]:checked:after{background-image:url('+n+")}",""]),e.exports=t},fece:function(e,t,a){var o=a("e80c");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("499e").default;i("7ed16b56",o,!0,{sourceMap:!1,shadowMode:!1})}}]);